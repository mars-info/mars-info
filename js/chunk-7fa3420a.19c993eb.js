(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa3420a"],{a920:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"typ","type":"uint256"},{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"i","type":"uint256"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"commission","type":"uint256"},{"internalType":"address","name":"referee","type":"address"},{"internalType":"uint256","name":"rebateRate","type":"uint256"}],"name":"rebateRecord","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"account","type":"address"}],"name":"minerRebateBrief","outputs":[{"internalType":"uint256","name":"amount0","type":"uint256"},{"internalType":"uint256","name":"amount1","type":"uint256"},{"internalType":"uint256","name":"count0","type":"uint256"},{"internalType":"uint256","name":"count1","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"typ","type":"uint256"},{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"address","name":"account","type":"address"}],"name":"minerRebateInfo","outputs":[{"internalType":"uint256[]","name":"levels","type":"uint256[]"},{"internalType":"address[]","name":"users","type":"address[]"},{"internalType":"uint256[]","name":"rebateValues","type":"uint256[]"},{"internalType":"uint256[]","name":"times","type":"uint256[]"},{"internalType":"uint256[]","name":"rates","type":"uint256[]"}],"stateMutability":"view","type":"function"}]')},a965:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),i=n("2704"),s=n.n(i),r=n("6be8"),c=n("6779"),o=n("bae1"),d=n("3de1"),l=n("c030"),p=n("a920");class u{constructor(e,t,n,a=p){this.provider=e;const i=e.getSigner(t).connectUnchecked();this.contract=new l["a"].Contract(n,a,i),console.log("moon log contract:",n)}async minerRebateBrief(e,t){return this.contract.minerRebateBrief(e,t)}async minerRebateInfo(e,t,n,a,i){return this.contract.minerRebateInfo(e,t,n,a,i)}}const m=Object(a["createElementVNode"])("img",{class:"w-1.2rem",src:s.a,alt:""},null,-1),y={class:"text-primaryColor pr-0.5rem"},b={class:"py-0.8rem border-b-1 border-white/10"},O={class:"address flex justify-between items-center text-12px text-white/50"},f=["data-clipboard-text"],j={class:"font-bold"},g={class:"flex justify-between items-center mt-0.4rem"},v={class:"text-14px font-bold text-primaryColor"},w={class:"text-12px text-white/30"};var x={__name:"RewardRecord",setup(e){const t=Object(a["inject"])("chainInfo"),n=Object(a["inject"])("miningContract"),i=Object(a["ref"])(null),s=Object(a["reactive"])({addressList:[],timeList:[],amountList:[],levelList:[],loading:!1,finished:!1,totalCount:0,startIndex:0,pageSize:50,isGetTotalCount:!1,logContractAddress:""}),l=async()=>{try{if(s.finished||s.loading)return;s.loading=!0,s.isGetTotalCount||(s.logContractAddress=await n.value.log(),i.value=new u(t.provider,t.account,s.logContractAddress));const e=s.startIndex+s.pageSize,a=await i.value.minerRebateInfo(0,o["b"].USDT,s.startIndex,e,t.account);if(s.loading=!1,!a||!a.users)return;a.users.length<s.pageSize&&(s.finished=!0),s.startIndex=e,s.addressList=s.addressList.concat(a.users),s.levelList=s.levelList.concat(a.levels),s.timeList=s.timeList.concat(a.times),s.amountList=s.amountList.concat(a.rebateValues)}catch(e){s.loading=!1,s.finished=!0,console.log(e)}},p=e=>{const t=c["utils"].formatUnits(e,o["b"].TokenDecimals);return Object(r["a"])(t,4)},x=e=>(e=e.toNumber(),0===e?"--":e-1);return Object(a["watch"])([()=>t.isActive,()=>t.isLogin],()=>{t.isActive&&t.isLogin&&l()},{immediate:!0}),(e,t)=>{const n=Object(a["resolveComponent"])("van-list");return Object(a["openBlock"])(),Object(a["createBlock"])(n,{loading:s.loading,"onUpdate:loading":t[2]||(t[2]=e=>s.loading=e),finished:s.finished,"immediate-check":!1,"loading-text":e.$t("loading"),"finished-text":e.$t("noMoreData"),onLoad:l},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("button",{class:"flex items-center h-2rem -ml-0.5rem",onClick:t[0]||(t[0]=t=>e.$router.back())},[m,Object(a["createElementVNode"])("span",y,Object(a["toDisplayString"])(e.$t("back")),1)]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.addressList,(n,i)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{key:i},[Object(a["createElementVNode"])("div",b,[Object(a["createElementVNode"])("div",O,[Object(a["createElementVNode"])("span",{"data-clipboard-text":n,class:"copy-icon",onClick:t[1]||(t[1]=t=>Object(a["unref"])(d["b"])(".copy-icon",e.$t("copySuccess")))},Object(a["toDisplayString"])(Object(a["unref"])(r["b"])(n)),9,f),Object(a["createElementVNode"])("span",j,"Level "+Object(a["toDisplayString"])(x(s.levelList[i])),1)]),Object(a["createElementVNode"])("div",g,[Object(a["createElementVNode"])("span",v,Object(a["toDisplayString"])(p(s.amountList[i])),1),Object(a["createElementVNode"])("span",w,Object(a["toDisplayString"])(Object(a["unref"])(r["d"])(1e3*s.timeList[i])),1)])])]))),128))]),_:1},8,["loading","finished","loading-text","finished-text"])}}};const T=x;var h=T,k=n("0437");const L={class:"container max-w-26rem px-15px mx-auto pb-2rem community"},C={key:0};var E={__name:"Index",setup(e){const t=Object(a["inject"])("chainInfo"),{miningContract:n,getMintContract:i}=Object(k["a"])();Object(a["provide"])("miningContract",n);Object(a["ref"])(0);return Object(a["watch"])([()=>t.isActive],()=>{t.isActive&&i()},{immediate:!0}),(e,t)=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[Object(a["unref"])(n)?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",C,[Object(a["createVNode"])(Object(a["unref"])(h))])):Object(a["createCommentVNode"])("",!0)]))}},N=(n("aa66"),n("6b0d")),V=n.n(N);const B=V()(E,[["__scopeId","data-v-355564e0"]]);t["default"]=B},aa66:function(e,t,n){"use strict";n("d5ac")},d5ac:function(e,t,n){}}]);